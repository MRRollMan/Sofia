from aiogram import types, F
from aiogram.filters import Command
from aiogram.types import InlineKeyboardButton, CallbackQuery
from aiogram.utils.keyboard import InlineKeyboardBuilder

from src.handlers.commands import commands_router
from src.types import (HelpCallback, Games)
from src.utils import TextBuilder, reply_and_delete


def get_help_keyboard():
    kb = InlineKeyboardBuilder()
    kb.row(InlineKeyboardButton(text="–û—Å–Ω–æ–≤–Ω–∞ –≥—Ä–∞ - /killru", callback_data=HelpCallback(game=Games.KILLRU).pack()),
           width=1)

    buttons = [
        InlineKeyboardButton(text="üé≤", callback_data=HelpCallback(game=Games.DICE).pack()),
        InlineKeyboardButton(text="üéØ", callback_data=HelpCallback(game=Games.DARTS).pack()),
        InlineKeyboardButton(text="üé≥", callback_data=HelpCallback(game=Games.BOWLING).pack()),
        InlineKeyboardButton(text="üèÄ", callback_data=HelpCallback(game=Games.BASKETBALL).pack()),
        InlineKeyboardButton(text="‚öΩ", callback_data=HelpCallback(game=Games.FOOTBALL).pack()),
        InlineKeyboardButton(text="üé∞", callback_data=HelpCallback(game=Games.CASINO).pack())
    ]

    kb.row(*buttons, width=4)
    return kb


@commands_router.message(Command("help"))
async def help_command(message: types.Message):
    kb = get_help_keyboard()
    await reply_and_delete(message, text="‚öôÔ∏è –¢—É—Ç —Ç–∏ –∑–º–æ–∂–µ—à –¥—ñ–∑–Ω–∞—Ç–∏—Å—è\n–ø—Ä–æ –º–µ–Ω–µ –≤—Å–µ", reply_markup=kb.as_markup())


@commands_router.callback_query(F.data == "back_to_help")
async def back_to_help(query: CallbackQuery):
    kb = get_help_keyboard()
    await query.message.edit_text("‚öôÔ∏è –¢—É—Ç —Ç–∏ –∑–º–æ–∂–µ—à –¥—ñ–∑–Ω–∞—Ç–∏—Å—è\n–ø—Ä–æ –º–µ–Ω–µ –≤—Å–µ", reply_markup=kb.as_markup())


@commands_router.callback_query(HelpCallback.filter())
async def callback_help(query: CallbackQuery, callback_data: HelpCallback):
    game_emojis = {
        "killru":
            f"–ì—Ä–∞ –≤ —Ä—É—Å–æ—Ñ–æ–±—ñ—é"
            "\n–£ –≥—Ä—É –º–æ–∂–Ω–∞ –∑—ñ–≥—Ä–∞—Ç–∏ –∫–æ–∂–µ–Ω –¥–µ–Ω—å –æ–¥–∏–Ω —Ä–∞–∑, –≤–∏–∫–æ–Ω–∞–≤—à–∏ /killru"
            "\n–ü—Ä–∏ —Ü—å–æ–º—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä—É—Å–æ—Ñ–æ–±—ñ—ó –≤–∏–ø–∞–¥–∫–æ–≤–∏–º —á–∏–Ω–æ–º –∑–±—ñ–ª—å—à–∏—Ç—å—Å—è(–¥–æ +25) –∞–±–æ –∑–º–µ–Ω—à–∏—Ç—å—Å—è(–¥–æ -5)"
            "\n–†–µ–π—Ç–∏–Ω–≥ –º–æ–∂–Ω–∞ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è –≤–∏–∫–æ–Ω–∞–≤—à–∏ /top. –Ñ –º–∞–ª–µ–Ω—å–∫–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç /top10, —ñ –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Ç–æ–ø, –ø–æ–∫–∞–∑—É—î —Ç–æ–ø "
            "—Å–µ—Ä–µ–¥ —É—Å—ñ—Ö —É—á–∞—Å–Ω–∏–∫—ñ–≤ /globaltop10 —ñ –º–∞–ª–µ–Ω—å–∫–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç /globaltop10"
            "\n–í–∏–∫–æ–Ω–∞–≤—à–∏ /my –º–æ–∂–Ω–∞ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è —Å–≤–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä—É—Å–æ—Ñ–æ–±—ñ—ó"
            "\n–ü–µ—Ä–µ–¥–∞—Ç–∏ —Å–≤–æ—é —Ä—É—Å–æ—Ñ–æ–±—ñ—é —ñ–Ω—à–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É, –º–æ–∂–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–≤—à–∏ –π–æ–º—É –∫–æ–º–∞–Ω–¥–æ—é /give, –≤–∫–∞–∑–∞–≤—à–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å "
            "—Ä—É—Å–æ—Ñ–æ–±—ñ—ó"
            "\n–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –±–æ—Ç–∞ –º–æ–∂–Ω–∞ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è, –≤–∏–∫–æ–Ω–∞–≤—à–∏ /about"
            "\n–°–ª—É–∂–±–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è: /ping"
            "\n–í–∞—Ä—ñ–∞–Ω—Ç–∏ –º—ñ–Ω—ñ-—ñ–≥–æ—Ä –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–∞ –∫–æ–º–∞–Ω–¥–æ—é /help, –≤–∏–±—Ä–∞–≤—à–∏ –∑–Ω–∏–∑—É –µ–º–æ–¥–∑—ñ, —â–æ –≤–∫–∞–∑—É—î –Ω–∞ –≥—Ä—É"
            "\n–ó–∞ –∫–æ–º–∞–Ω–¥–æ—é /settings –º–æ–∂–Ω–∞ –≤–∏–º–∫–Ω—É—Ç–∏ –≤ —á–∞—Ç—ñ –º—ñ–Ω—ñ-—ñ–≥—Ä–∏ —Ç–∞ –ø–µ—Ä–µ–¥–∞—á—É —Ä—É—Å–æ—Ñ–æ–±—ñ—ó. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–Ω—ñ "
            "—Ç—ñ–ª—å–∫–∏ –∞–¥–º—ñ–Ω–∞–º —á–∞—Ç—É"
            "\n–í–∏–π—Ç–∏ –∑ –≥—Ä–∏ (–ø—Ä–æ–≥—Ä–µ—Å –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è): /leave"
            "\n\n\n–Ø–∫—â–æ –º–µ–Ω—ñ –≤–∏–¥–∞—Ç–∏ –ø—Ä–∞–≤–∞ –∞–¥–º—ñ–Ω–∞ (–≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å), —Ç–æ —è —á–µ—Ä–µ–∑ –≥–æ–¥–∏–Ω—É –±—É–¥—É –≤–∏–¥–∞–ª—è—Ç–∏ "
            "–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –º–µ–Ω–µ —ñ —è–∫—ñ –º–µ–Ω–µ –≤–∏–∫–ª–∏–∫–∞–ª–∏. –ó–∞–ª–∏—à–∞—é—á–∏ —Ç—ñ–ª—å–∫–∏ –ø—Ä–æ –∑–º—ñ–Ω–∏ –≤ —Ä—É—Å–æ—Ñ–æ–±—ñ—ó"
            "\n\n\nKillru. –°–º–µ—Ä—Ç—å –≤—Å—å–æ–º—É —Ä–æ—Å—ñ–π—Å—å–∫–æ–º—É. ü´°",

        "game":
            f"üßå –ó–Ω–∞–π–¥–∏ —ñ –≤–±–∏–π –º–æ—Å–∫–∞–ª—è. –°—É—Ç—å –≥—Ä–∏ –≤–≥–∞–¥–∞—Ç–∏ –¥–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –º–æ—Å–∫–∞–ª—å –Ω–∞ —Å—ñ—Ç—Ü—ñ 3—Ö3"
            "\n‚è±Ô∏è –ú–æ–∂–Ω–∞ –∑—ñ–≥—Ä–∞—Ç–∏ —Ä–∞–∑ –Ω–∞ 2 –≥–æ–¥–∏–Ω–∏"
            "\nüîÄ –ü—Ä–∏–∑: —Å—Ç–∞–≤–∫–∞ –º–Ω–æ–∂–∏—Ç—å—Å—è –Ω–∞ 1.5. –ë—É–ª–æ 50 –∫–≥. –ü—Ä–∏ –≤–∏–≥—Ä–∞—à—ñ –∑—ñ —Å—Ç–∞–≤–∫–æ—é 10, –æ—Ç—Ä–∏–º—É—î—à 20. –ë—É–¥–µ 70"
            "\nüí∞ –°—Ç–∞–≤–∫–∏: 1, 5, 10, 20, 30, 40, 50, 100"
            "\nüöÄ –ö–æ–º–∞–Ω–¥–∞ –≥—Ä–∏: /game",

        "dice":
            f"üé≤ –ì—Ä–∞ —É –∫–æ—Å—Ç—ñ. –°—É—Ç—å –≥—Ä–∏ –≤–≥–∞–¥–∞—Ç–∏ —è–∫–µ –≤–∏–ø–∞–¥–µ —á–∏—Å–ª–æ, –ø–∞—Ä–Ω–µ —á–∏ –Ω–µ–ø–∞—Ä–Ω–µ"
            "\n‚è±Ô∏è –ú–æ–∂–Ω–∞ –∑—ñ–≥—Ä–∞—Ç–∏ —Ä–∞–∑ –Ω–∞ 2 –≥–æ–¥–∏–Ω–∏"
            "\nüîÄ –ü—Ä–∏–∑: —Å—Ç–∞–≤–∫–∞ –º–Ω–æ–∂–∏—Ç—å—Å—è –Ω–∞ 1.5. –ë—É–ª–æ 50 –∫–≥. –ü—Ä–∏ –≤–∏–≥—Ä–∞—à—ñ –∑—ñ —Å—Ç–∞–≤–∫–æ—é 10, –æ—Ç—Ä–∏–º—É—î—à 15. –ë—É–¥–µ 65"
            "\nüí∞ –°—Ç–∞–≤–∫–∏: 1, 5, 10, 20, 30, 40, 50, 100"
            "\nüöÄ –ö–æ–º–∞–Ω–¥–∞ –≥—Ä–∏: /dice",

        "darts":
            f"üéØ –ì—Ä–∞ –≤ –¥–∞—Ä—Ç—Å. –°—É—Ç—å –≥—Ä–∏ –ø–æ—Ç—Ä–∞–ø–∏—Ç–∏ –≤ —Ü–µ–Ω—Ç—Ä"
            "\n‚è±Ô∏è –ú–æ–∂–Ω–∞ –∑—ñ–≥—Ä–∞—Ç–∏ —Ä–∞–∑ –Ω–∞ 2 –≥–æ–¥–∏–Ω–∏"
            "\nüîÄ –ü—Ä–∏–∑: —Å—Ç–∞–≤–∫–∞ –º–Ω–æ–∂–∏—Ç—å—Å—è –Ω–∞ 2. –ë—É–ª–æ 50 –∫–≥. –ü—Ä–∏ –≤–∏–≥—Ä–∞—à—ñ –∑—ñ —Å—Ç–∞–≤–∫–æ—é 10, –æ—Ç—Ä–∏–º—É—î—à 20. –ë—É–¥–µ 70"
            "\nüí∞ –°—Ç–∞–≤–∫–∏: 1, 5, 10, 20, 30, 40, 50, 100"
            "\nüöÄ –ö–æ–º–∞–Ω–¥–∞ –≥—Ä–∏: /darts",

        "basketball":
            f"üèÄ –ì—Ä–∞ –≤ –±–∞—Å–∫–µ—Ç–±–æ–ª. –°—É—Ç—å –≥—Ä–∏ –ø–æ—Ç—Ä–∞–ø–∏—Ç–∏ –≤ –∫–æ—à–∏–∫ –º'—è—á–µ–º"
            "\n‚è±Ô∏è –ú–æ–∂–Ω–∞ –∑—ñ–≥—Ä–∞—Ç–∏ —Ä–∞–∑ –Ω–∞ 2 –≥–æ–¥–∏–Ω–∏"
            "\nüîÄ –ü—Ä–∏–∑: —Å—Ç–∞–≤–∫–∞ –º–Ω–æ–∂–∏—Ç—å—Å—è –Ω–∞ 1.5. –ë—É–ª–æ 50 –∫–≥. –ü—Ä–∏ –≤–∏–≥—Ä–∞—à—ñ –∑—ñ —Å—Ç–∞–≤–∫–æ—é 10, –æ—Ç—Ä–∏–º—É—î—à 15. –ë—É–¥–µ 65"
            "\nüí∞ –°—Ç–∞–≤–∫–∏: 1, 5, 10, 20, 30, 40, 50, 100"
            "\nüöÄ –ö–æ–º–∞–Ω–¥–∞ –≥—Ä–∏: /basketball",

        "football":
            f"‚öΩÔ∏è –ì—Ä–∞ —É —Ñ—É—Ç–±–æ–ª. –°—É—Ç—å –≥—Ä–∏ –ø–æ—Ç—Ä–∞–ø–∏—Ç–∏ –º'—è—á–µ–º —É –≤–æ—Ä–æ—Ç–∞"
            "\n‚è±Ô∏è –ú–æ–∂–Ω–∞ –∑—ñ–≥—Ä–∞—Ç–∏ —Ä–∞–∑ –Ω–∞ 2 –≥–æ–¥–∏–Ω–∏"
            "\nüîÄ –ü—Ä–∏–∑: —Å—Ç–∞–≤–∫–∞ –º–Ω–æ–∂–∏—Ç—å—Å—è –Ω–∞ 1.5. –ë—É–ª–æ 50 –∫–≥. –ü—Ä–∏ –≤–∏–≥—Ä–∞—à—ñ –∑—ñ —Å—Ç–∞–≤–∫–æ—é 10, –æ—Ç—Ä–∏–º—É—î—à 15. –ë—É–¥–µ 65"
            "\nüí∞ –°—Ç–∞–≤–∫–∏: 1, 5, 10, 20, 30, 40, 50, 100"
            "\nüöÄ –ö–æ–º–∞–Ω–¥–∞ –≥—Ä–∏: /football",

        "bowling":
            f"üé≥ –ì—Ä–∞ –≤ –±–æ—É–ª—ñ–Ω–≥. –°—É—Ç—å –≥—Ä–∏ –≤–∏–±–∏—Ç–∏ —Å—Ç—Ä–∞–π–∫"
            "\n‚è±Ô∏è –ú–æ–∂–Ω–∞ –∑—ñ–≥—Ä–∞—Ç–∏ —Ä–∞–∑ –Ω–∞ 2 –≥–æ–¥–∏–Ω–∏"
            "\nüîÄ –ü—Ä–∏–∑: —Å—Ç–∞–≤–∫–∞ –º–Ω–æ–∂–∏—Ç—å—Å—è –Ω–∞ 2. –ë—É–ª–æ 50 –∫–≥. –ü—Ä–∏ –≤–∏–≥—Ä–∞—à—ñ –∑—ñ —Å—Ç–∞–≤–∫–æ—é 10, –æ—Ç—Ä–∏–º—É—î—à 20. –ë—É–¥–µ 70"
            "\nüí∞ –°—Ç–∞–≤–∫–∏: 1, 5, 10, 20, 30, 40, 50, 100"
            "\nüöÄ –ö–æ–º–∞–Ω–¥–∞ –≥—Ä–∏: /bowling",

        "casino":
            f"üé∞ –ì—Ä–∞ –≤ –∫–∞–∑–∏–Ω–æ. –°—É—Ç—å –≥—Ä–∏ –≤–∏–±–∏—Ç–∏ –¥–∂–µ–∫–ø–æ—Ç"
            "\n‚è±Ô∏è –ú–æ–∂–Ω–∞ –∑—ñ–≥—Ä–∞—Ç–∏ —Ä–∞–∑ –Ω–∞ 2 –≥–æ–¥–∏–Ω–∏"
            "\nüîÄ –ü—Ä–∏–∑: —Å—Ç–∞–≤–∫–∞ –º–Ω–æ–∂–∏—Ç—å—Å—è –Ω–∞ 2. –ë—É–ª–æ 50 –∫–≥. –ü—Ä–∏ –≤–∏–≥—Ä–∞—à—ñ –∑—ñ —Å—Ç–∞–≤–∫–æ—é 10, –æ—Ç—Ä–∏–º—É—î—à 20. –ë—É–¥–µ 70. –Ø–∫—â–æ "
            "–≤–∏–±–∏—Ç–∏ –¥–∂–µ–∫–ø–æ—Ç (777), —Ç–æ —Å—Ç–∞–≤–∫–∞ –º–Ω–æ–∂–∏—Ç—å—Å—è –Ω–∞ 10"
            "\nüí∞ –°—Ç–∞–≤–∫–∏: 1, 5, 10, 20, 30, 40, 50, 100"
            "\nüöÄ –ö–æ–º–∞–Ω–¥–∞ –≥—Ä–∏: /casino",
    }
    tb = TextBuilder()
    tb.add(game_emojis[callback_data.game])
    kb = InlineKeyboardBuilder()
    kb.row(InlineKeyboardButton(text="‚Ü©Ô∏è –ù–∞–∑–∞–¥", callback_data="back_to_help"))
    await query.message.edit_text(tb.render(), reply_markup=kb.as_markup())
